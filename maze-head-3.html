<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spider Head Maze - Fixed Start</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: Arial, sans-serif; background-color: #333; color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #game-area { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; max-width: 600px; height: 90%; position: relative; }
        #game-canvas { border: 2px solid #555; background-color: #444; touch-action: none; display: block; }
        #ui-panel { display: flex; justify-content: space-around; align-items: center; width: 100%; max-width: 600px; padding: 10px 0; height: 10%; min-height: 70px; }
        #biscuit-tin-container { width: 60px; height: 60px; cursor: grab; display: flex; align-items: center; justify-content: center; }
        #message-area { font-size: 1.2em; text-align: center; flex-grow: 1; }
        .game-over-message, .win-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px; font-size: 1.5em; text-align: center; z-index: 100; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div id="game-area">
        <svg id="game-canvas"></svg>
        <div id="ui-panel">
            <div id="biscuit-tin-container" title="Drag a biscuit!"></div>
            <div id="message-area">Biscuits Eaten: <span id="biscuit-count">0</span>/<span id="biscuit-limit">?</span></div>
        </div>
    </div>
    <div id="game-over-screen" class="hidden game-over-message">
        <h2>Game Over!</h2>
        <p id="game-over-text">The head exploded!</p>
        <button onclick="startGame()">Play Again</button>
    </div>
    <div id="win-screen" class="hidden win-message">
        <h2>You Win!</h2>
        <p>The head is happy with its new hat!</p>
        <button onclick="startGame()">Play Again</button>
    </div>

    <script>
        const svgNS = "http://www.w3.org/2000/svg";
        const gameCanvas = document.getElementById('game-canvas');
        const biscuitTinContainer = document.getElementById('biscuit-tin-container');
        const biscuitCountSpan = document.getElementById('biscuit-count');
        const biscuitLimitSpan = document.getElementById('biscuit-limit');
        const gameOverScreen = document.getElementById('game-over-screen');
        const winScreen = document.getElementById('win-screen');
        const gameOverText = document.getElementById('game-over-text');

        let MAZE_COLS = 10; let MAZE_ROWS = 10;
        let CELL_SIZE; let STROKE_WIDTH = 2;
        let maze = [];
        let head = { x: 0, y: 0, pixelX: 0, pixelY: 0, svgElement: null, legs: [], legPhase: 0, isMoving: false, targetCell: null, path: [], scary: true, hatSVG: null };
        let currentBiscuit = null; let placedBiscuits = [];
        let biscuitsEaten = 0; let biscuitExplosionLimit = 0;
        let isDraggingBiscuit = false; let gameLoopTimeout; let centerCell;

        function createHeadSVG(_, __, radius) {
            const group = document.createElementNS(svgNS, "g");
            const headBaseRadius = radius; const headVisualRadius = headBaseRadius * 0.8;
            const headCircle = document.createElementNS(svgNS, "circle");
            headCircle.setAttribute("cx", 0); headCircle.setAttribute("cy", 0); headCircle.setAttribute("r", headVisualRadius);
            headCircle.setAttribute("fill", "lightcoral"); headCircle.setAttribute("stroke", "darkred"); headCircle.setAttribute("stroke-width", "2");
            group.appendChild(headCircle);
            const eyeGroup = document.createElementNS(svgNS, "g"); eyeGroup.setAttribute("id", "head-eyes");
            const eyeR = headVisualRadius * 0.18; const pupilR = headVisualRadius * 0.09;
            const eyeOffsetX = headVisualRadius * 0.35; const eyeOffsetY = -headVisualRadius * 0.2;
            const eyeLeft = document.createElementNS(svgNS, "circle");
            eyeLeft.setAttribute("cx", -eyeOffsetX); eyeLeft.setAttribute("cy", eyeOffsetY); eyeLeft.setAttribute("r", eyeR); eyeLeft.setAttribute("fill", "yellow"); eyeGroup.appendChild(eyeLeft);
            const pupilLeft = document.createElementNS(svgNS, "circle");
            pupilLeft.setAttribute("cx", -eyeOffsetX); pupilLeft.setAttribute("cy", eyeOffsetY); pupilLeft.setAttribute("r", pupilR); pupilLeft.setAttribute("fill", "black"); eyeGroup.appendChild(pupilLeft);
            const eyeRight = document.createElementNS(svgNS, "circle");
            eyeRight.setAttribute("cx", eyeOffsetX); eyeRight.setAttribute("cy", eyeOffsetY); eyeRight.setAttribute("r", eyeR); eyeRight.setAttribute("fill", "yellow"); eyeGroup.appendChild(eyeRight);
            const pupilRight = document.createElementNS(svgNS, "circle");
            pupilRight.setAttribute("cx", eyeOffsetX); pupilRight.setAttribute("cy", eyeOffsetY); pupilRight.setAttribute("r", pupilR); pupilRight.setAttribute("fill", "black"); eyeGroup.appendChild(pupilRight);
            group.appendChild(eyeGroup);
            const mouthPath = document.createElementNS(svgNS, "path"); mouthPath.setAttribute("id", "head-mouth");
            const mouthY = headVisualRadius * 0.3; const mouthWidth = headVisualRadius * 0.4;
            mouthPath.setAttribute("d", `M ${-mouthWidth} ${mouthY} Q 0 ${mouthY + headVisualRadius * 0.2} ${mouthWidth} ${mouthY}`);
            mouthPath.setAttribute("stroke", "darkred"); mouthPath.setAttribute("stroke-width", "1.5"); mouthPath.setAttribute("fill", "none"); group.appendChild(mouthPath);
            head.legs = [];
            for (let i = 0; i < 8; i++) {
                const
